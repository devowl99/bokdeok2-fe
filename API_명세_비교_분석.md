# API ëª…ì„¸ ë¹„êµ ë¶„ì„

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¹„êµ

ì‚¬ìš©ìê°€ ì œê³µí•œ API ëª…ì„¸ì™€ ì‹¤ì œ ë°±ì—”ë“œ êµ¬í˜„ì„ ë¹„êµí•œ ê²°ê³¼ì…ë‹ˆë‹¤.

---

## âŒ ë¶ˆì¼ì¹˜í•˜ëŠ” í•­ëª©

### 1. ë¶€ë™ì‚° ê´€ë ¨ API

| ê¸°ëŠ¥ | ëª…ì„¸ | ì‹¤ì œ ë°±ì—”ë“œ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° |
|------|------|------------|----------------|
| ë¶€ë™ì‚° ëª©ë¡ ì¡°íšŒ | `GET /api/v1/estate` | `GET /api/v1/houses` | âœ… ì—°ê²°ë¨ (`/houses` ì‚¬ìš©) |
| ìƒì„¸ ì •ë³´ ì¡°íšŒ | `GET /api/v1/estate/{estateId}` | `GET /api/v1/houses/{aptSeq}` | âœ… ì—°ê²°ë¨ (`/houses/{aptSeq}` ì‚¬ìš©) |
| ì¡°ê±´ ê²€ìƒ‰ | `GET /api/v1/estate/search?keyword=...` | ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ |
| ìŠ¤í¬ë© ìˆ˜ ì¡°íšŒ | `GET /api/v1/estate/{estateId}/scrap-count` | ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ |

**ë¬¸ì œì **:
- ëª…ì„¸ëŠ” `/estate` ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ë°±ì—”ë“œëŠ” `/houses` ì‚¬ìš©
- ì¡°ê±´ ê²€ìƒ‰ APIê°€ ë°±ì—”ë“œì— ì—†ìŒ
- ìŠ¤í¬ë© ìˆ˜ ì¡°íšŒ APIê°€ ë°±ì—”ë“œì— ì—†ìŒ

### 2. ìŠ¤í¬ë© ê´€ë ¨ API

| ê¸°ëŠ¥ | ëª…ì„¸ | ì‹¤ì œ ë°±ì—”ë“œ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° |
|------|------|------------|----------------|
| ìŠ¤í¬ë© ì¶”ê°€ | `POST /api/v1/scrap/{estateId}` | `POST /api/v1/houses/{aptSeq}/scrap?userId=...` | âœ… ì—°ê²°ë¨ (ë‹¤ë¥¸ ê²½ë¡œ ì‚¬ìš©) |
| ìŠ¤í¬ë© ì‚­ì œ | `DELETE /api/v1/scrap/{estateId}` | `POST /api/v1/houses/{aptSeq}/scrap` (í† ê¸€) | âš ï¸ ê²½ë¡œ/ë©”ì„œë“œ ë‹¤ë¦„ |

**ë¬¸ì œì **:
- ëª…ì„¸ëŠ” `/scrap/{estateId}`ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ë°±ì—”ë“œëŠ” `/houses/{aptSeq}/scrap` ì‚¬ìš©
- ëª…ì„¸ëŠ” ì¶”ê°€/ì‚­ì œë¥¼ ë¶„ë¦¬í•˜ì§€ë§Œ ë°±ì—”ë“œëŠ” í† ê¸€ ë°©ì‹ (POST í•˜ë‚˜ë¡œ ì²˜ë¦¬)

### 3. ì¸ì¦ ê´€ë ¨ API

| ê¸°ëŠ¥ | ëª…ì„¸ | ì‹¤ì œ ë°±ì—”ë“œ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° |
|------|------|------------|----------------|
| ë¡œê·¸ì¸ í™•ì¸ | `GET /api/v1/auth/check` | ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ |
| ë¡œê·¸ì•„ì›ƒ | `POST /api/v1/logout` | ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ (í”„ë¡ íŠ¸ì—”ë“œì—ì„œë§Œ ì²˜ë¦¬) |

**ë¬¸ì œì **:
- ë¡œê·¸ì¸ í™•ì¸ APIê°€ ë°±ì—”ë“œì— ì—†ìŒ
- ë¡œê·¸ì•„ì›ƒ APIê°€ ë°±ì—”ë“œì— ì—†ìŒ (í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í† í° ì‚­ì œë§Œ ì²˜ë¦¬)

### 4. í”„ë¡œí•„ ê´€ë ¨ API

| ê¸°ëŠ¥ | ëª…ì„¸ | ì‹¤ì œ ë°±ì—”ë“œ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° |
|------|------|------------|----------------|
| íšŒì›ì •ë³´ ë³´ê¸° | `GET /api/v1/profile` | `GET /api/v1/user/profile` | âœ… ì—°ê²°ë¨ (`/user/profile` ì‚¬ìš©) |

**ë¬¸ì œì **:
- ëª…ì„¸ëŠ” `/profile`ì´ì§€ë§Œ ë°±ì—”ë“œëŠ” `/user/profile` ì‚¬ìš©

### 5. LLM ê´€ë ¨ API

| ê¸°ëŠ¥ | ëª…ì„¸ | ì‹¤ì œ ë°±ì—”ë“œ | í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²° |
|------|------|------------|----------------|
| ì£¼ë³€ í’ê²½ ì„¤ëª… | `POST /api/v1/llm/landscape` | `POST /api/v1/llm` (typeìœ¼ë¡œ êµ¬ë¶„) | âš ï¸ ê²½ë¡œ ë‹¤ë¦„ |
| ì¡°ê±´ ê¸°ë°˜ ì¶”ì²œ | `POST /api/v1/llm/recommend` | `POST /api/v1/llm` (typeìœ¼ë¡œ êµ¬ë¶„) | âš ï¸ ê²½ë¡œ ë‹¤ë¦„ |

**ë¬¸ì œì **:
- ëª…ì„¸ëŠ” ë³„ë„ ì—”ë“œí¬ì¸íŠ¸ (`/llm/landscape`, `/llm/recommend`)ë¥¼ ì‚¬ìš©
- ë°±ì—”ë“œëŠ” í•˜ë‚˜ì˜ ì—”ë“œí¬ì¸íŠ¸ (`/llm`)ì—ì„œ typeìœ¼ë¡œ êµ¬ë¶„

---

## âœ… ì¼ì¹˜í•˜ëŠ” í•­ëª©

1. **ë¡œê·¸ì¸**: `POST /api/v1/auth/login` âœ…
2. **íšŒì›ì •ë³´ ìˆ˜ì •**: `PUT /api/v1/profile/edit` âœ…
3. **íšŒì› íƒˆí‡´**: `DELETE /api/v1/profile` âœ…

---

## ğŸ”§ ìˆ˜ì • í•„ìš”í•œ ì‚¬í•­

### ë°±ì—”ë“œ ìˆ˜ì • ê¶Œì¥ (ëª…ì„¸ì— ë§ì¶”ê¸°)

1. **ë¶€ë™ì‚° API ê²½ë¡œ í†µì¼**
   - `/api/v1/houses` â†’ `/api/v1/estate`ë¡œ ë³€ê²½
   - ë˜ëŠ” ëª…ì„¸ë¥¼ `/api/v1/houses`ë¡œ ìˆ˜ì •

2. **ì¡°ê±´ ê²€ìƒ‰ API ì¶”ê°€**
   ```java
   @GetMapping("/search")
   public ResponseEntity<List<HouseInfoDto>> searchEstates(
       @RequestParam(required = false) String keyword,
       @RequestParam(required = false) String region,
       @RequestParam(required = false) Integer minPrice,
       @RequestParam(required = false) Integer maxPrice,
       @RequestParam(required = false) String type
   )
   ```

3. **ìŠ¤í¬ë© ìˆ˜ ì¡°íšŒ API ì¶”ê°€**
   ```java
   @GetMapping("/{estateId}/scrap-count")
   public ResponseEntity<Integer> getScrapCount(@PathVariable String estateId)
   ```

4. **ìŠ¤í¬ë© API ê²½ë¡œ/ë©”ì„œë“œ ìˆ˜ì •**
   - `POST /api/v1/scrap/{estateId}` ì¶”ê°€
   - `DELETE /api/v1/scrap/{estateId}` ì¶”ê°€
   - ê¸°ì¡´ `/houses/{aptSeq}/scrap`ëŠ” ìœ ì§€ ë˜ëŠ” ì œê±°

5. **ë¡œê·¸ì¸ í™•ì¸ API ì¶”ê°€**
   ```java
   @GetMapping("/check")
   public ResponseEntity<?> checkAuth(@AuthenticationPrincipal UserDetails userDetails)
   ```

6. **ë¡œê·¸ì•„ì›ƒ API ì¶”ê°€** (ì„ íƒì‚¬í•­, JWTëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ)
   ```java
   @PostMapping("/logout")
   public ResponseEntity<?> logout()
   ```

7. **í”„ë¡œí•„ ì¡°íšŒ API ê²½ë¡œ ìˆ˜ì •**
   - `/api/v1/user/profile` â†’ `/api/v1/profile`ë¡œ ë³€ê²½
   - ë˜ëŠ” ëª…ì„¸ë¥¼ `/api/v1/user/profile`ë¡œ ìˆ˜ì •

8. **LLM API ë¶„ë¦¬**
   - `/api/v1/llm/landscape` ì¶”ê°€
   - `/api/v1/llm/recommend` ì¶”ê°€
   - ê¸°ì¡´ `/api/v1/llm`ëŠ” ìœ ì§€ ë˜ëŠ” ì œê±°

---

### í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • í•„ìš” (ëª…ì„¸ì— ë§ì¶”ê¸°)

í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œëŠ” ì‹¤ì œ ë°±ì—”ë“œ êµ¬í˜„ì— ë§ì¶° ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ëª…ì„¸ì— ë§ì¶”ë ¤ë©´ ë°±ì—”ë“œê°€ ë¨¼ì € ìˆ˜ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

#### ìˆ˜ì •ì´ í•„ìš”í•œ íŒŒì¼ë“¤:

1. **ë§¤ë¬¼ API ê²½ë¡œ**
   - `src/pages/estate/Map.vue`: `/houses` â†’ `/estate`
   - `src/pages/estate/EstateDetail.vue`: `/houses/{aptSeq}` â†’ `/estate/{estateId}`
   - `src/components/estate/EstateDetailModal.vue`: ë™ì¼

2. **ìŠ¤í¬ë© API ê²½ë¡œ**
   - `src/stores/scrap.js`: 
     - `/houses/scraps` â†’ `/scrap` (ìŠ¤í¬ë© ëª©ë¡ì€ ëª…ì„¸ì— ì—†ì§€ë§Œ í•„ìš”)
     - `/houses/{aptSeq}/scrap` â†’ `/scrap/{estateId}` (POST/DELETE ë¶„ë¦¬)

3. **í”„ë¡œí•„ ì¡°íšŒ**
   - `src/stores/auth.js`: `/user/profile` â†’ `/profile`
   - `src/pages/mypage/MyPage.vue`: ë™ì¼

4. **LLM API**
   - `src/components/common/FloatingAIChat.vue`: `/llm` â†’ `/llm/recommend` ë˜ëŠ” `/llm/landscape`
   - `src/pages/estate/Map.vue`: LLM ì¶”ì²œ API ì—°ê²°

---

## ğŸ“ ê²°ë¡ 

### í˜„ì¬ ìƒí™©
- **í”„ë¡ íŠ¸ì—”ë“œ**: ì‹¤ì œ ë°±ì—”ë“œ êµ¬í˜„ì— ë§ì¶° ì—°ê²°ë¨ âœ…
- **ë°±ì—”ë“œ**: ëª…ì„¸ì™€ ë‹¤ì†Œ ì°¨ì´ê°€ ìˆìŒ âš ï¸

### ê¶Œì¥ ì‚¬í•­

**ì˜µì…˜ 1: ë°±ì—”ë“œë¥¼ ëª…ì„¸ì— ë§ì¶”ê¸°** (ê¶Œì¥)
- ëª…ì„¸ëŒ€ë¡œ ë°±ì—”ë“œ API ìˆ˜ì •
- í”„ë¡ íŠ¸ì—”ë“œëŠ” ë°±ì—”ë“œ ìˆ˜ì • í›„ ê²½ë¡œë§Œ ë³€ê²½

**ì˜µì…˜ 2: ëª…ì„¸ë¥¼ ì‹¤ì œ êµ¬í˜„ì— ë§ì¶”ê¸°**
- API ëª…ì„¸ ë¬¸ì„œë¥¼ ì‹¤ì œ ë°±ì—”ë“œ êµ¬í˜„ì— ë§ê²Œ ìˆ˜ì •
- í”„ë¡ íŠ¸ì—”ë“œëŠ” í˜„ì¬ ìƒíƒœ ìœ ì§€

**ì˜µì…˜ 3: ì ì§„ì  ìˆ˜ì •**
- ìš°ì„ ìˆœìœ„ ë†’ì€ í•­ëª©ë¶€í„° ìˆ˜ì •
- í•„ìˆ˜ ê¸°ëŠ¥ ë¨¼ì € ëª…ì„¸ì— ë§ì¶”ê¸°

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ìˆ˜ì • ê¶Œì¥ ì‚¬í•­

### ë†’ìŒ (í•„ìˆ˜)
1. ë¶€ë™ì‚° API ê²½ë¡œ í†µì¼ (`/estate` vs `/houses`)
2. ìŠ¤í¬ë© API ê²½ë¡œ í†µì¼ (`/scrap` vs `/houses/.../scrap`)
3. í”„ë¡œí•„ ì¡°íšŒ ê²½ë¡œ í†µì¼ (`/profile` vs `/user/profile`)

### ì¤‘ê°„ (ê¸°ëŠ¥ ì¶”ê°€)
4. ì¡°ê±´ ê²€ìƒ‰ API ì¶”ê°€
5. ìŠ¤í¬ë© ìˆ˜ ì¡°íšŒ API ì¶”ê°€
6. LLM API ë¶„ë¦¬ (`/llm/landscape`, `/llm/recommend`)

### ë‚®ìŒ (ì„ íƒ)
7. ë¡œê·¸ì¸ í™•ì¸ API (í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í† í° í™•ì¸ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥)
8. ë¡œê·¸ì•„ì›ƒ API (JWTëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ í•„ìˆ˜ ì•„ë‹˜)

---

**ë¹„ê³ **: í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œëŠ” ì‹¤ì œ ë°±ì—”ë“œ êµ¬í˜„ì— ë§ì¶° ì˜ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ëª…ì„¸ì™€ì˜ ì°¨ì´ëŠ” ë°±ì—”ë“œ ì½”ë“œì™€ ëª…ì„¸ ë¬¸ì„œ ê°„ì˜ ë¶ˆì¼ì¹˜ ë•Œë¬¸ì…ë‹ˆë‹¤.

